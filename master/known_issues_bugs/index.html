
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="mergerfs - a featureful union filesystem">
      
      
      
        <link rel="canonical" href="https://trapexit.github.io/mergerfs/master/known_issues_bugs/">
      
      
        <link rel="prev" href="../tips_notes/">
      
      
        <link rel="next" href="../project_comparisons/">
      
      
      <link rel="icon" href="../logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>Known Issues and Bugs - mergerfs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#known-issues-and-bugs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="mergerfs" class="md-header__button md-logo" aria-label="mergerfs" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mergerfs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Known Issues and Bugs
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/trapexit/mergerfs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    mergerfs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="mergerfs" class="md-nav__button md-logo" aria-label="mergerfs" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    mergerfs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/trapexit/mergerfs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    mergerfs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuickStart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../terminology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terminology
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro_to_filesystems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intro to Filesystems
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Config
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/deprecated_options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deprecated Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/branches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    branches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/branches_mount_timeout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    branches-mount-timeout
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/functions_categories_policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    functions, categories and policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/minfreespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    minfreespace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/func_readdir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    func.readdir
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/rename_and_link/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rename and link
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/moveonenospc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    moveonenospc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    caching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/readahead/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    readahead
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/inodecalc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    inodecalc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/threads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    threads
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/pin-threads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pin-threads
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/link_cow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    link_cow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/fuse_msg_size/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fuse_msg_size
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/follow-symlinks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    follow-symlinks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/link-exdev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    link-exdev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/rename-exdev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rename-exdev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/symlinkify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    symlinkify
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/nullrw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nullrw
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/xattr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    xattr
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/nfsopenhack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nfsopenhack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/statfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    statfs / statvfs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/flush-on-close/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    flush-on-close
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/export-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    export-support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/kernel-permissions-check/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kernel-permissions-check
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../error_handling_and_logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling and Logging
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../runtime_interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Interfaces
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote_filesystems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Filesystems
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tips_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tips and Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Known Issues and Bugs
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Known Issues and Bugs
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mergerfs" class="md-nav__link">
    <span class="md-ellipsis">
      mergerfs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mergerfs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supplemental-user-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Supplemental user groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-mtime-is-not-being-updated" class="md-nav__link">
    <span class="md-ellipsis">
      directory mtime is not being updated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mv-mntpoolfoo-mntdisk1foo-removes-foo" class="md-nav__link">
    <span class="md-ellipsis">
      'mv /mnt/pool/foo /mnt/disk1/foo' removes 'foo'
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cached-memory-appears-greater-than-it-should-be" class="md-nav__link">
    <span class="md-ellipsis">
      cached memory appears greater than it should be
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3rd-party-software" class="md-nav__link">
    <span class="md-ellipsis">
      3rd Party Software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3rd Party Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs-clients-returning-estale-stale-file-handle" class="md-nav__link">
    <span class="md-ellipsis">
      NFS clients returning ESTALE / Stale file handle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlite3-plex-jellyfin-do-not-work-with-mergerfs" class="md-nav__link">
    <span class="md-ellipsis">
      SQLite3, Plex, Jellyfin do not work with mergerfs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#my-32bit-software-has-problems" class="md-nav__link">
    <span class="md-ellipsis">
      my 32bit software has problems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-files-and-directories-fails-with-samba" class="md-nav__link">
    <span class="md-ellipsis">
      Moving files and directories fails with Samba
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trashing-files-occasionally-fails" class="md-nav__link">
    <span class="md-ellipsis">
      Trashing files occasionally fails
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fuse-and-linux-kernel" class="md-nav__link">
    <span class="md-ellipsis">
      FUSE and Linux kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FUSE and Linux kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs-and-eio-errors" class="md-nav__link">
    <span class="md-ellipsis">
      NFS and EIO errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#truncated-files" class="md-nav__link">
    <span class="md-ellipsis">
      Truncated files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crashing-on-openvz" class="md-nav__link">
    <span class="md-ellipsis">
      Crashing on OpenVZ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#really-bad-mmap-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Really bad mmap performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heavy-load-and-memory-pressure-leads-to-kernel-panic" class="md-nav__link">
    <span class="md-ellipsis">
      Heavy load and memory pressure leads to kernel panic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../project_comparisons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Comparisons
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tweaking Performance
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmarking
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tooling
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage_patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage Patterns
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            FAQ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/why_isnt_it_working/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    "Why isn't it working?"
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/reliability_and_scalability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reliability and Scalability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/usage_and_functionality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage and Functionality
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/configuration_and_policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration and Policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/compatibility_and_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compatibility and Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/recommendations_and_warnings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recommendations and Warnings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/technical_behavior_and_limitations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Behavior and Limitations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/have_you_considered/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    "Have You Considered?"
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/limit_drive_spinup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Limiting drive spinup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../related_projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Related Projects
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../media_and_publicity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Media and Publicity
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sponsorship_and_donations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sponsorship and Donations
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mergerfs" class="md-nav__link">
    <span class="md-ellipsis">
      mergerfs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mergerfs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supplemental-user-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Supplemental user groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-mtime-is-not-being-updated" class="md-nav__link">
    <span class="md-ellipsis">
      directory mtime is not being updated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mv-mntpoolfoo-mntdisk1foo-removes-foo" class="md-nav__link">
    <span class="md-ellipsis">
      'mv /mnt/pool/foo /mnt/disk1/foo' removes 'foo'
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cached-memory-appears-greater-than-it-should-be" class="md-nav__link">
    <span class="md-ellipsis">
      cached memory appears greater than it should be
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3rd-party-software" class="md-nav__link">
    <span class="md-ellipsis">
      3rd Party Software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3rd Party Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs-clients-returning-estale-stale-file-handle" class="md-nav__link">
    <span class="md-ellipsis">
      NFS clients returning ESTALE / Stale file handle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlite3-plex-jellyfin-do-not-work-with-mergerfs" class="md-nav__link">
    <span class="md-ellipsis">
      SQLite3, Plex, Jellyfin do not work with mergerfs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#my-32bit-software-has-problems" class="md-nav__link">
    <span class="md-ellipsis">
      my 32bit software has problems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-files-and-directories-fails-with-samba" class="md-nav__link">
    <span class="md-ellipsis">
      Moving files and directories fails with Samba
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trashing-files-occasionally-fails" class="md-nav__link">
    <span class="md-ellipsis">
      Trashing files occasionally fails
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fuse-and-linux-kernel" class="md-nav__link">
    <span class="md-ellipsis">
      FUSE and Linux kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FUSE and Linux kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs-and-eio-errors" class="md-nav__link">
    <span class="md-ellipsis">
      NFS and EIO errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#truncated-files" class="md-nav__link">
    <span class="md-ellipsis">
      Truncated files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crashing-on-openvz" class="md-nav__link">
    <span class="md-ellipsis">
      Crashing on OpenVZ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#really-bad-mmap-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Really bad mmap performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heavy-load-and-memory-pressure-leads-to-kernel-panic" class="md-nav__link">
    <span class="md-ellipsis">
      Heavy load and memory pressure leads to kernel panic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/trapexit/mergerfs/edit/master/mkdocs/docs/known_issues_bugs.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/trapexit/mergerfs/raw/master/mkdocs/docs/known_issues_bugs.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="known-issues-and-bugs">Known Issues and Bugs</h1>
<h2 id="mergerfs">mergerfs</h2>
<h3 id="supplemental-user-groups">Supplemental user groups</h3>
<p>Due to the overhead of
<a href="http://linux.die.net/man/2/setgroups">getgroups/setgroups</a> mergerfs
utilizes a cache. This cache is opportunistic and per thread. Each
thread will query the supplemental groups for a user when that
particular thread needs to change credentials and will keep that data
for the lifetime of the thread. This means that if a user is added to
a group it may not be picked up without the restart of
mergerfs. In the future this may be improved to allow a periodic or
manual clearing of the cache.</p>
<p>While not a bug some users have found when using containers that
supplemental groups defined inside the container don't work as
expected. Since mergerfs lives outside the container it is querying
the host's group database. Effectively containers have their own user
and group definitions unless setup otherwise just as different systems
would.</p>
<p>Users should mount in the host group file into the containers or use a
standard shared user &amp; groups technology like NIS or LDAP.</p>
<h3 id="directory-mtime-is-not-being-updated">directory mtime is not being updated</h3>
<p>Remember that the default policy for <code>getattr</code> is <code>ff</code>. The
information for the first directory found will be returned. If it
wasn't the directory which had been updated then it will appear
outdated.</p>
<p>The reason this is the default is because any other policy would be
more expensive and for many applications it is unnecessary. To always
return the directory with the most recent mtime or a faked value based
on all found would require a scan of all filesystems.</p>
<p>If you always want the directory information from the one with the
most recent mtime then use the <code>newest</code> policy for <code>getattr</code>.</p>
<h3 id="mv-mntpoolfoo-mntdisk1foo-removes-foo">'mv /mnt/pool/foo /mnt/disk1/foo' removes 'foo'</h3>
<p>This is not a bug.</p>
<p>Run in verbose mode to better understand what's happening:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$ mv -v /mnt/pool/foo /mnt/disk1/foo
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>copied &#39;/mnt/pool/foo&#39; -&gt; &#39;/mnt/disk1/foo&#39;
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>removed &#39;/mnt/pool/foo&#39;
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>$ ls /mnt/pool/foo
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>ls: cannot access &#39;/mnt/pool/foo&#39;: No such file or directory
</span></code></pre></div>
<p><code>mv</code>, when working across devices, is copying the source to target and
then removing the source. Since the source <strong>is</strong> the target in this
case, depending on the unlink policy, it will remove the just copied
file and other files across the branches.</p>
<p>If you want to move files to one filesystem just copy them there and
use mergerfs.dedup to clean up the old paths or manually remove them
from the branches directly.</p>
<h3 id="cached-memory-appears-greater-than-it-should-be">cached memory appears greater than it should be</h3>
<p>Use <code>cache.files=off</code> and/or <code>dropcacheonclose=true</code>. See the section
on <a href="../config/cache/">page caching</a>.</p>
<h2 id="3rd-party-software">3rd Party Software</h2>
<h3 id="nfs-clients-returning-estale-stale-file-handle">NFS clients returning ESTALE / Stale file handle</h3>
<p>NFS generally does not like out of band changes. Take a look at the
section on NFS in the <a href="../remote_filesystems/">remote-filesystems</a> for
more details.</p>
<h3 id="sqlite3-plex-jellyfin-do-not-work-with-mergerfs">SQLite3, Plex, Jellyfin do not work with mergerfs</h3>
<p>It does. If you're trying to put the software's config / metadata /
database on mergerfs you can't set
<a href="../config/cache/">cache.files=off</a> (unless you use Linux v6.6 or
above) because they are using <strong>sqlite3</strong> with <strong>mmap</strong> enabled.</p>
<p>That said it is recommended that config and runtime files be stored on
SSDs on a regular filesystem for performance reasons. See <a href="../faq/recommendations_and_warnings/">What should
mergerfs NOT be used for?</a>.</p>
<p>Other software that leverages <strong>sqlite3</strong> which require <strong>mmap</strong>
includes Radarr, Sonarr, and Lidarr. That said many programs use
<strong>sqlite3</strong> and do not require <strong>mmap</strong>.</p>
<p>It is recommended that you reach out to the developers of the software
you are having troubles with and asking them to add a fallback to
regular file IO when <strong>mmap</strong> is unavailable. It is not only more
compatible and resilient but also can be more performant in certain
situations.</p>
<p>If the issue is that quick scanning doesn't seem to pick up media then
be sure to set <code>func.getattr=newest</code>. That said a full scan will pick
up all media and it will put less load on the host to use time based
library scans or to configure downloading software to trigger a scan
when files are added to the pool. See <a href="../faq/compatibility_and_integration/#does-inotify-and-fanotify-work">Does inotify and fanotify
work?</a>
for more details.</p>
<h3 id="my-32bit-software-has-problems">my 32bit software has problems</h3>
<p>Some software have problems with 64bit inode values. The symptoms can
include EOVERFLOW errors when trying to list files. You can address
this by setting <code>inodecalc</code> to one of the 32bit based algos as
described in the relevant section.</p>
<h3 id="moving-files-and-directories-fails-with-samba">Moving files and directories fails with Samba</h3>
<p>Workaround: Copy the file/directory and then remove the original
rather than move.</p>
<p>This isn't an issue with Samba but some SMB clients. GVFS-fuse v1.20.3
and prior (found in Ubuntu 14.04 among others) failed to handle
certain error codes correctly. Particularly <code>STATUS_NOT_SAME_DEVICE</code>
which comes from the <code>EXDEV</code> that is returned by <code>rename</code> when the
call is crossing mount points. When a program gets an <code>EXDEV</code> it needs
to explicitly take an alternate action to accomplish its goal. In the
case of <code>mv</code> or similar it tries <code>rename</code> and on <code>EXDEV</code> falls back to
a copying the file to the destination and deleting the source. In
these older versions of GVFS-fuse if it received <code>EXDEV</code> it would
translate that into <code>EIO</code>. This would cause <code>mv</code> or most any
application attempting to move files around on that SMB share to fail
with a generic IO error.</p>
<p><a href="https://bugzilla.gnome.org/show_bug.cgi?id=734568">GVFS-fuse v1.22.0</a>
and above fixed this issue but a large number of systems use the older
release. On Ubuntu, the version can be checked by issuing <code>apt-cache
showpkg gvfs-fuse</code>. Most distros released in 2015 seem to have the
updated release and will work fine but older systems may
not. Upgrading gvfs-fuse or the distro in general will address the
problem.</p>
<p>In Apple's MacOSX 10.9 they replaced Samba (client and server) with
their own product. It appears their new client does not handle
<code>EXDEV</code> either and responds similarly to older releases of gvfs on
Linux.</p>
<h3 id="trashing-files-occasionally-fails">Trashing files occasionally fails</h3>
<p>This is the same issue as with Samba. <code>rename</code> returns <code>EXDEV</code> (in our
case that will really only happen with path preserving policies like
<code>epmfs</code>) and the software doesn't handle the situation well. This is
unfortunately a common failure of software which moves files
around. The standard indicates that an implementation <strong>MAY</strong> choose
to support non-user home directory trashing of files (which is a
<strong>MUST</strong>). The implementation <strong>MAY</strong> also support "top directory
trashes" which many probably do.</p>
<p>To create a <code>$topdir/.Trash</code> directory as defined in the standard use
the <a href="https://github.com/trapexit/mergerfs-tools">mergerfs-tools</a> tool
<code>mergerfs.mktrash</code>.</p>
<h2 id="fuse-and-linux-kernel">FUSE and Linux kernel</h2>
<p>There have been a number of kernel issues / bugs over the years which
mergerfs has run into. Here is a list of them for reference and
posterity.</p>
<h3 id="nfs-and-eio-errors">NFS and EIO errors</h3>
<p><a href="https://lore.kernel.org/linux-fsdevel/20240228160213.1988854-1-mszeredi@redhat.com/T/">https://lore.kernel.org/linux-fsdevel/20240228160213.1988854-1-mszeredi@redhat.com/T/</a></p>
<p>Over the years some users have reported that while exporting mergerfs
via NFS, after significant filesystem activity, not only will the NFS
client start returning ESTALE and EIO errors but mergerfs itself would
start returning EIO errors. The problem was that no one could
reliability reproduce the issue. After a string of reports in late
2023 and early 2024 more investigation was done.</p>
<p>In Linux 5.14 new validation was put into FUSE which caught a few
invalid situations and would tag a FUSE node as invalid if a check
failed. Such checks include invalid file type, changing of type from
one request to another, a size greater than 63bit, and the generation
of a inode changing while in use.</p>
<p>What happened was that mergerfs was using a different fixed, non-zero
value for the generation of all nodes as it was suggested that unique
inode + generation pairs are needed for proper integration with
NFS. That non-zero value was being sent back to the kernel when a
lookup request was made for root. The reason this was hard to track
down was because NFS almost uniquely uses an API which can lead to a
lookup of the root node that simply won't happen under normal
workloads and usage. And that lookup will only happen if child nodes
of the root were forgotten but NFS still had a handle to that node and
later asked for details about it. It would trigger a set of requests
to lookup info on those nodes.</p>
<p>This wasn't a bug in FUSE but mergerfs. However, the incorrect
behavior of mergerfs lead to FUSE behave in an unexpected and
incorrect manner. It would issue a lookup of the "parent of a child of
the root" and mergerfs would send the invalid generation value. As a
result the kernel would mark the root node as "bad" which would then
trigger the kernel to issue a "forget root" message. In between those
it would issue a request for the parent of the root... which doesn't
exist.</p>
<p>So the kernel was doing two invalid things. Requesting the parent of
the root and then when that failed issuing a forget for the
root. These led to chasing after the wrong possible causes.</p>
<p>The change was for FUSE to revert the marking of root node bad if the
generation is non-zero and warn about it. It will mark the node bad
but not unhash/forget/remove it.</p>
<p>mergerfs in v2.40.1 ensures that generation for root is always 0 on
lookup which should work across any kernel version.</p>
<h3 id="truncated-files">Truncated files</h3>
<p>This was a bug with <code>mmap</code> and <code>FUSE</code> on 32bit platforms. Should be fixed in all LTS releases.</p>
<ul>
<li><a href="https://marc.info/?l=linux-fsdevel&amp;m=155550785230874&amp;w=2">https://marc.info/?l=linux-fsdevel&amp;m=155550785230874&amp;w=2</a></li>
</ul>
<h3 id="crashing-on-openvz">Crashing on OpenVZ</h3>
<p>There was a bug in the OpenVZ kernel with regard to how it handles <code>ioctl</code> calls. It was making invalid requests which would lead to crashes due to mergerfs not expecting them.</p>
<ul>
<li><a href="https://bugs.openvz.org/browse/OVZ-7145">https://bugs.openvz.org/browse/OVZ-7145</a></li>
<li><a href="https://www.mail-archive.com/devel@openvz.org/msg37096.html">https://www.mail-archive.com/devel@openvz.org/msg37096.html</a></li>
</ul>
<h3 id="really-bad-mmap-performance">Really bad mmap performance</h3>
<p>There was a bug in caching which affects overall performance of <code>mmap</code> through <code>FUSE</code> in Linux 4.x kernels. It is fixed in 4.4.10 and 4.5.4.</p>
<ul>
<li><a href="https://lkml.org/lkml/2016/3/16/260">https://lkml.org/lkml/2016/3/16/260</a></li>
<li><a href="https://lkml.org/lkml/2016/5/11/59">https://lkml.org/lkml/2016/5/11/59</a></li>
</ul>
<h3 id="heavy-load-and-memory-pressure-leads-to-kernel-panic">Heavy load and memory pressure leads to kernel panic</h3>
<ul>
<li><a href="https://lkml.org/lkml/2016/9/14/527">https://lkml.org/lkml/2016/9/14/527</a></li>
<li><a href="https://lkml.org/lkml/2016/10/4/1">https://lkml.org/lkml/2016/10/4/1</a></li>
<li><a href="https://www.theregister.com/2016/10/05/linus_torvalds_admits_buggy_crap_made_it_into_linux_48/">https://www.theregister.com/2016/10/05/linus_torvalds_admits_buggy_crap_made_it_into_linux_48/</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../tips_notes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Tips and Notes">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Tips and Notes
              </div>
            </div>
          </a>
        
        
          
          <a href="../project_comparisons/" class="md-footer__link md-footer__link--next" aria-label="Next: Project Comparisons">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Project Comparisons
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.code.select", "navigation.footer", "navigation.instant", "navigation.instant.prefetch", "navigation.path", "navigation.top", "navigation.tracking", "optimize", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>